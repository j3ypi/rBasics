<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Datenvorbereitung • rBasics</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Datenvorbereitung">
<meta property="og:description" content="rBasics">
<meta property="og:image" content="https://github.com/j3ypi/rBasics/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-142129809-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-142129809-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rBasics</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01_Setup.html">Setup</a>
    </li>
    <li>
      <a href="../articles/02_Datenvorbereitung.html">Datenvorbereitung</a>
    </li>
    <li>
      <a href="../articles/03_Deskriptive_Statistik.html">Deskriptive Statistik</a>
    </li>
    <li>
      <a href="../articles/04_Visualisierungen.html">Visualisierungen</a>
    </li>
    <li>
      <a href="../articles/05_Inferenzstatistik.html">Inferenzstatistik</a>
    </li>
    <li>
      <a href="../articles/06_Extras.html">Extras</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    PDFs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../pdfs/01_Setup.pdf">Setup</a>
    </li>
    <li>
      <a href="../pdfs/02_Datenvorbereitung.pdf">Datenvorbereitung</a>
    </li>
    <li>
      <a href="../pdfs/03_Deskriptive_Statistik.pdf">Deskriptive Statistik</a>
    </li>
    <li>
      <a href="../pdfs/04_Visualisierungen.pdf">Visualisierungen</a>
    </li>
    <li>
      <a href="../pdfs/05_Inferenzstatistik.pdf">Inferenzstatistik</a>
    </li>
    <li>
      <a href="../pdfs/06_Extras.pdf">Extras</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Dokumentation</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/j3ypi/rBasics">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Datenvorbereitung</h1>
            <h3 data-toc-skip class="subtitle">R für empirische
Wissenschaften v1.0.2</h3>
                        <h4 data-toc-skip class="author">Jan Philipp
Nolte</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/j3ypi/rBasics/blob/HEAD/vignettes/02_Datenvorbereitung.Rmd"><code>vignettes/02_Datenvorbereitung.Rmd</code></a></small>
      <div class="hidden name"><code>02_Datenvorbereitung.Rmd</code></div>

    </div>

    
    
<div style="page-break-after: always;"></div>
<div class="info">
Die neue Version befindet sich als Buch unter
<a href="https://r-empirische-wissenschaften.de" class="external-link">
https://r-empirische-wissenschaften.de </a>
</div>
<div class="section level2">
<h2 id="einführung">Einführung<a class="anchor" aria-label="anchor" href="#einf%C3%BChrung"></a>
</h2>
<p>Die Methoden zur Datenvorbereitung zu lernen, ist der mit Abstand
wichtigste und schwierigste Schritt auf dem Weg, R in der Praxis
anwenden zu können. Deswegen ist dieser Teil auch der umfangreichste und
mit einer interaktiven Übung am Ende versehen, an der Du Dein Wissen
festigen kannst. Allerdings liegt in der Datenvorbereitung auch die
größte Stärke im Vergleich zu Programmen wie SPSS. Bevor wir mit der <a href="#datenvorbereitung">Datenvorbereitung</a> beginnen, müssen wir uns
jedoch noch verschiedene Themen aneignen.</p>
</div>
<div class="section level2">
<h2 id="projektorientierter-workflow">Projektorientierter Workflow<a class="anchor" aria-label="anchor" href="#projektorientierter-workflow"></a>
</h2>
<p>Projekte sind ein modernes Konzept, um R Scripte und Datensätze zu
organisieren. Es gibt verschiedene Vorteile durch Projekte. Man kann
zwischen Projekten innerhalb von R oben rechts einfach wechseln, der Ort
von Datensätzen muss nicht mehr in Abhängigkeit vom eigenen Computer
angepasst werden und Projekte sind aufgrund von in sich abgeschlossenen
Umgebungen replizierbar. Aber wie erstellt man ein Projekt?</p>
<ol style="list-style-type: decimal">
<li><p>Oben rechts befindet sich ein Reiter namens
<code>Project: (None)</code>. Klicke auf den Reiter und klicke auf
<code>New Project...</code> . In dem Reiter kann man auch schon
bestehende Projekte sehen. Bei Klick auf die Projekte wird das Projekt
sofort mit allen zuvor geöffneten R Scripten geöffnet. Ganz ohne suchen
des Ordners auf Deinem Computer.
<img src="images/rproj1.jpg" width="35%" style="display: block; margin: auto;"></p></li>
<li><p>Nun sehen wir drei Möglichkeiten. Wir entscheiden uns
exemplarisch für <code>New Directory</code>, was einen neuen Ordner mit
einer Projektdatei erstellen wird.
<img src="images/rproj2.jpg" width="50%" style="display: block; margin: auto;"></p></li>
<li><p>Bevor die Projektdatei erstellt wird, müsenn wir noch
spezifizieren, welchen Projektyp wir haben möchten. Hier wählen wir
<code>New Project</code>.
<img src="images/rproj3.jpg" width="50%" style="display: block; margin: auto;"></p></li>
<li><p>Nun müssen wir noch den Namen des neuen Ordners festlegen und
angeben, wo auf dem Computer der Ordner erstellt werden soll. In Zukunft
kann der Ordner nach belieben verschoben werden. Das wichtige ist die
nun in diesem Ordner enthaltene Projektdatei
(<code>projektname.rproj</code>).
<img src="images/rproj4.jpg" width="50%" style="display: block; margin: auto;"></p></li>
</ol>
<p>Wenn Du nun das Package <code>here</code> lädst, findet das Package
sofort den relativen Pfad zu Deiner Projektdatei heraus. Was bedeutet
das? Egal wo sich der Ordner befindet (Desktop, Downloads Ordner oder
tief verschachtel in Ordnerstrukturen), <code>here</code> findet den
richtigen Weg. Zu wissen, wo sich das benutze R Script auf dem Computer
befindet, ist kriegsentscheidend zum Einlesen des Datensatzes. Durch die
Projektdatei braucht man also nie wieder das Working Directory per Hand
mit <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd()</a></code> festzulegen.</p>
<p>Der erste Schritt ist also immer das Erstellen eines R Projekts und
das Laden des Packages am Anfang jedes neuen Scripts, mit dem man einen
Datensatz einlesen möchte.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span></code></pre></div>
<p>Aber wie kann man den Datensatz nun einlesen?</p>
</div>
<div class="section level2">
<h2 id="importexport">Import/Export<a class="anchor" aria-label="anchor" href="#importexport"></a>
</h2>
<p>Auch wenn in diesem Tutorial die Datensätze bereits im Package
enthalten sind, muss man in den meisten Fällen den Datensatz erst einmal
einlesen. Datensätze können in verschiedenen Formaten vorliegen. Dies
ist vor allem abhängig davon, mit welchen Programmen Unternehmen,
Universitäten oder Kollegen arbeiten. Einige Beispiele sind:</p>
<ul>
<li>R (<code>.RData</code> | <code>.rda</code> | <code>.rds</code>)</li>
<li>Excel (<code>.xlsx</code> | <code>.xls</code>)</li>
<li>SPSS (<code>.sav</code>)</li>
<li>Stata (<code>.dta</code>)</li>
<li>Comma seperated values (<code>.csv</code>)</li>
<li>Tab seperated values (<code>.tsv</code>)</li>
</ul>
<div class="section level3">
<h3 id="einlesen-eines-datensatzes">Einlesen eines Datensatzes<a class="anchor" aria-label="anchor" href="#einlesen-eines-datensatzes"></a>
</h3>
<p>Eingelesen werden können sämtliche Dateientypen mithilfe von
<code><a href="https://rdrr.io/pkg/rio/man/import.html" class="external-link">import()</a></code> aus dem <code>rio</code> Package. Dabei erkennt
die Funktion die Dateiendung und übernimmt hinter den Kulissen alles
weitere. Damit der Datensatz als tibble (siehe Kapitel
<code>Extras</code>) eingelesen wird, muss man
<code>setclass = "tbl"</code> setzen. Für den Moment musst Du Dir beim
<code>setclass</code> Argument noch nichts denken (aber trotzdem
verwenden!).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leeper/rio" class="external-link">rio</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html" class="external-link">import</a></span><span class="op">(</span><span class="st">"test.xlsx"</span>, setclass <span class="op">=</span> <span class="st">"tbl"</span><span class="op">)</span></span></code></pre></div>
<p>Dabei muss sich das <code>test.xlsx</code> Excel Sheet innerhalb des
selben Ordners wie die Projektdatei befinden. Der zweite Schritt ist
also immer <code>rio</code> zu laden, da sonst die Funktionen nicht
aufgerufen werden können.</p>
</div>
<div class="section level3">
<h3 id="einlesen-multipler-datensätze">Einlesen multipler Datensätze<a class="anchor" aria-label="anchor" href="#einlesen-multipler-datens%C3%A4tze"></a>
</h3>
<p>Nicht selten kommt es vor, dass man nicht nur einen, sondern gleich
mehrere Datensätze einlesen möchte. Dabei werden die verschiedenen Files
in einer Liste (mehr zu Listen im Kapitel <code>Extras</code>)
gespeichert. <code><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir()</a></code> (für directory) listet alle Files
innerhalb eines Ordners auf. Der <a href="Zuweisungspfeil">Pfeil</a>
wird später erklärt.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"csv$"</span><span class="op">)</span></span></code></pre></div>
<p>Das <code>pattern</code> Argument ist optional. Man kann damit zum
Beispiel die Dateiendung spezifizieren. Das Dollar-Zeichen am Ende
stellt sicher, dass <em>csv</em> am Ende des Dateinamen steht. Zum
Importieren verwenden wir hier <code><a href="https://rdrr.io/pkg/rio/man/import_list.html" class="external-link">import_list()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import_list.html" class="external-link">import_list</a></span><span class="op">(</span><span class="va">files</span>, setclass <span class="op">=</span> <span class="st">"tbl"</span><span class="op">)</span></span></code></pre></div>
<p>Würden die Dateien in einem Unterordner <code>data</code> liegen,
könnte man mit der Funktion <code><a href="https://here.r-lib.org//reference/here.html" class="external-link">here()</a></code> aus dem gleichnamigen
Package den Pfad dahin spezifizieren.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"csv$"</span><span class="op">)</span></span></code></pre></div>
<p>Sind die Datensätze im selben Format, kann man
<code><a href="https://rdrr.io/pkg/rio/man/import_list.html" class="external-link">import_list()</a></code> das Argument <code>rbind</code> geben, sodass
alle Datensätze zeilenweise zusammengebunden werden.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import_list.html" class="external-link">import_list</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="va">files</span><span class="op">)</span>, setclass <span class="op">=</span> <span class="st">"tbl"</span>, rbind <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="https://rdrr.io/pkg/rio/man/import_list.html" class="external-link">import_list()</a></code> funktioniert übrigens auch auch bei Excel
Workbooks, die mehrere Excel Sheets beinhalten. Dabei wird jedes Sheet
in einem Listenelement gespeichert. Für den Moment sind Listen für uns
allerdings nicht weiter von Bedeutung.</p>
</div>
<div class="section level3">
<h3 id="speichern">Speichern<a class="anchor" aria-label="anchor" href="#speichern"></a>
</h3>
<p>Auch das Speichern von Datensätzen könnte in R durch das
<code>rio</code> Package intuitiver nicht sein. Anstelle von
<code><a href="https://rdrr.io/pkg/rio/man/import.html" class="external-link">import()</a></code> muss man lediglich <code><a href="https://rdrr.io/pkg/rio/man/export.html" class="external-link">export()</a></code> benutzen.
Das erste Argument der Funktion ist der Datensatzname, mit dem man
innerhalb von R auf selbigen zugreift. Das zweite der gewünschte
Dateienname.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html" class="external-link">export</a></span><span class="op">(</span><span class="va">datensatz</span>, <span class="st">"test.xlsx"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="zuweisungspfeil">Zuweisungspfeil<a class="anchor" aria-label="anchor" href="#zuweisungspfeil"></a>
</h2>
<p>Damit man den Datensatz auch speichert, muss man ihn einer Variable
zuweisen. Dies macht man in R mit einem Zuweisungspfeil. Dabei wird die
Variable in die lokale <strong>Environment</strong> gespeichert. Wichtig
zu verstehen ist, dass in R nichts gespeichert wird, wenn man es nicht
einer Variable zuweist.</p>
<p>Variablen kann man grundsätzlich fast so benennen wie man möchte. Man
darf nur nicht mit einer Zahl anfangen oder nach einem Punkt direkt eine
Zahl als Namen wählen wie bei <code>.2VariablenName</code>. Auf Umlaute
sollte im Zusammenhang mit Programmiersprachen ebenfalls
<strong>immer</strong> verzichtet werden. In diesem Fall ist der
Variablenname <code>tipp_wm</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html" class="external-link">import</a></span><span class="op">(</span><span class="st">"tipp_wm.xlsx"</span>, setclass <span class="op">=</span> <span class="st">"tbl"</span><span class="op">)</span></span></code></pre></div>
<p>Auch bei anderen Befehlen, die wir später kennenlernen, ist der
Zuweisungspfeil zentral, um Ergebnisse zu speichern und sie später
wieder zu verwenden.</p>
</div>
<div class="section level2">
<h2 id="der-tidyverse-ansatz">Der tidyverse Ansatz<a class="anchor" aria-label="anchor" href="#der-tidyverse-ansatz"></a>
</h2>
<p>Das <code>tidyverse</code> ist eine Zusammenstellung mehrerer
Packages, die aufeinander abgestimmt sind. Gegenüber <code>Base R</code>
macht es vieles im Kontext von Datenverarbeitung erheblich einfacher.
Der Großteil der Aufgaben, die wir mithilfe von <code>tidyverse</code>
Packages machen werden, kann man auch mit normalen <code>Base R</code>
Funktionen ausführen. Allerdings kommt man mithilfe des
<code>tidyverse</code> einfacher und schneller ans Ziel, mit dem
Nebeneffekt einer nachvollziehbareren Syntax. Gerade wenn man sich
Monate später den eigenen Code noch einmal ansieht, lernt man den Wert
von Lesbarkeit zu schätzen. Zur Lesbarkeit trägt auch die angemessene
Verwendung von <strong>Leerzeichen</strong> bei.</p>
<p>Der Hintergrund vom <code>tidyverse</code> ist es, <strong>tidy
data</strong> zu kreieren. Man spricht von <strong>tidy data</strong>,
wenn:</p>
<ol style="list-style-type: decimal">
<li>Jede Variable eine Spalte ist</li>
<li>Jede Beobachtung eine Zeile ist</li>
<li>Jeder Wert in einer Zelle ist</li>
</ol>
<p>Wir halten fest: Nach dem Starten von RStudio erstellen wir ein
Projekt und laden erst einmal die drei wichtigsten Packages
<code>here</code>, <code>rio</code> und <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leeper/rio" class="external-link">rio</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="datentypen">Datentypen<a class="anchor" aria-label="anchor" href="#datentypen"></a>
</h3>
<p>Es gibt verschiedene Datentypen, die in den Spalten gespeichert
werden. Die drei Hauptdatentypen, sind hier aufgelistet. In R werden sie
etwas untypisch im Vergleich zu anderen Programmiersprachen benannt. In
Klammern steht die jeweilige Abkürzung.</p>
<ul>
<li>
<code>numeric</code> (num / int / dbl): z.B. Alter, Gehalt</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">42</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 42</span></span></code></pre>
<ul>
<li>
<code>character</code> (chr): z.B. Herkunftsland, Allergien</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"Hallo Welt"</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Hallo Welt"</span></span></code></pre>
<ul>
<li>
<code>logical</code> (lgl): TRUE, FALSE</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span> <span class="op">==</span> <span class="fl">2</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&lt;</span> <span class="fl">2</span> <span class="op">&amp;</span> <span class="fl">1</span> <span class="op">==</span> <span class="fl">2</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] FALSE</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&lt;</span> <span class="fl">2</span> <span class="op">|</span> <span class="fl">1</span> <span class="op">==</span> <span class="fl">2</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<p>Logical Datentypen sind sicherlich erst einmal etwas seltsam für
Programmiereinsteiger. Grundsätzlich kann eine logische Aussage immer
nur <code>TRUE</code> oder <code>FALSE</code> zurückgeben. Ist ein Apfel
gleich einer Banane? <code>FALSE</code>! Ist 1 kleiner als 2?
<code>TRUE</code>! Bei logischen Abfragen ist es wichtig zu beachten,
dass, wenn man auf Gleichheit von zwei Werten prüft, nicht ein einfaches
<code>=</code>, sondern ein doppeltes <code>==</code> nötig ist. Man
kann logische Aussagen auch kombinieren. Wenn beide logische Abfragen
stimmen sollen, kann man ein <code>&amp;</code> (UND) schreiben. Wenn
nur einer Aussage richtig sein muss, damit der Wert <code>TRUE</code>
zurückgegeben wird, muss man <code>|</code> (ODER) schreiben.
Ungleichheit kann man mit <code>!=</code> abfragen. Das Konzept
logischer Datentypen ist sehr wichtig für uns, also merken und damit
warm werden!</p>
</div>
</div>
<div class="section level2">
<h2 id="datenvorbereitung">Datenvorbereitung<a class="anchor" aria-label="anchor" href="#datenvorbereitung"></a>
</h2>
<p>Wir erinnern uns, bei der Datenvorbereitung immer das
<code>tidyverse</code> zu laden. Schauen wir uns zuerst einmal den
ersten Datensatz an. Wer hat sich bei der Fußball Weltmeisterschafft
2018 in Russland nicht häufig über die Ergebnisse gewundert? Unseren 6
Personen in der Tipprunde in unserem Datensatz ging es nicht anders.</p>
<p>Drei der Urväter der zwei großen Strömungen der modernen Statistik
haben sich aus dem Grabe erhoben, um noch einmal beim Tippen richtig
abzuräumen. Reverant Thomas Bayes, Jerzy Neyman und Egon Pearson stellen
sich dem Expertenwissen der drei Studenten Alice, Bob und Charlie.</p>
<p>Um den Datensatz ausgeben zu lassen, kannst Du einfach den
Datensatznamen ausführen.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 384 × 7</span></span></span>
<span><span class="co">##    Spieltag Person       Tipp  Ergebnis Tipp_Richtung Wahre_Richtung Art        </span></span>
<span><span class="co">##       <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>         </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>          </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>      </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>        1 Thomas_Bayes 2:0   5:0      S             S              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>        2 Thomas_Bayes 1:3   0:1      N             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>        2 Thomas_Bayes 0:0   0:1      U             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>        2 Thomas_Bayes 1:2   3:3      N             U              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>        3 Thomas_Bayes 2:1   2:1      S             S              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>        3 Thomas_Bayes 3:0   1:1      S             U              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>        3 Thomas_Bayes 0:2   0:1      N             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>        3 Thomas_Bayes 4:0   2:0      S             S              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>        4 Thomas_Bayes 2:1   0:1      S             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>        4 Thomas_Bayes 3:0   0:1      S             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 374 more rows</span></span></span></code></pre>
<p>Wir sehen sofort, es gibt 384 Zeilen und 7 Spalten. Es werden immer
nur die ersten 10 Werte angezeigt.</p>
<ul>
<li>Spieltag: Nummer des Spieltags. An jedem Spieltag haben 1 bis 4
Spiele statt gefunden.</li>
<li>Person: Die 6 verschiedenen Tipper</li>
<li>Tipp: Der abgegebene Tipp für das jeweilige Spiel</li>
<li>Ergebnis: Das tatsächliche Ergebnis</li>
<li>Tipp_Richtung: Tipp, ob Sieg/Niederlage oder Unentschieden ausgehend
von der Heimmannschaft</li>
<li>Wahre_Richtung: Tatsächliche Richtung, ob Sieg/Niederlage oder
Unentschieden ausgehend von der Heimmannschaft</li>
<li>Art: Art des Spiels (Gruppenphase, Achtelfinale, etc.)</li>
</ul>
<p>(Der Datensatz ist in der Form nicht <strong>tidy</strong>.)</p>
<p>Du wirst schnell sehen, wie sehr sich die Methoden des
<code>tidyverse</code> am normalen Englisch orientieren. Wenn wir zum
Beispiel nur auf die Tipps von Reverent Bayes schauen möchten, können
wir mit <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> einen einfach Filter setzen. Dabei müssen
wir nur die Spalte mit der Information über die Person auswählen und mit
einem doppelten Gleichheitszeichen abfragen, ob diese Herrn Bayes
entspricht.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Person</span> <span class="op">==</span> <span class="st">"Thomas_Bayes"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 64 × 7</span></span></span>
<span><span class="co">##    Spieltag Person       Tipp  Ergebnis Tipp_Richtung Wahre_Richtung Art        </span></span>
<span><span class="co">##       <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>         </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>          </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>      </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>        1 Thomas_Bayes 2:0   5:0      S             S              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>        2 Thomas_Bayes 1:3   0:1      N             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>        2 Thomas_Bayes 0:0   0:1      U             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>        2 Thomas_Bayes 1:2   3:3      N             U              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>        3 Thomas_Bayes 2:1   2:1      S             S              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>        3 Thomas_Bayes 3:0   1:1      S             U              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>        3 Thomas_Bayes 0:2   0:1      N             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>        3 Thomas_Bayes 4:0   2:0      S             S              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>        4 Thomas_Bayes 2:1   0:1      S             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>        4 Thomas_Bayes 3:0   0:1      S             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 54 more rows</span></span></span></code></pre>
<p>Wir sehen, dass nur noch 64 Spalten enthalten sind. So weit so gut,
aber was ist dieses kryptische “Prozent, größer als, Prozent” (
<code>%&gt;%</code> )? Was erst einmal nach Hacken ala Mr. Robot
aussieht, bindet ganz einfach nur zwei Code Zeilen aneinander. Wir
werden gleich sehen, worin der große Vorteil davon besteht. Man
bezeichnet diese Zeichnenkombination als <strong>Pipe</strong>. Am
Anfang jeder Pipe steht immer der Name des Datensatz. In unserem Fall
<code>tipp_wm</code>. Ab hier weiß R für alle mit der Pipe verbunden
Funktionen, welcher Datensatz gemeint ist. Deswegen müssen wir
<code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> auch nicht noch einmal extra mitteilen, in welchen
Datensatz nach der Spalte <code>Person</code> gesucht werden soll.</p>
<p>Um dieses <em>Monster</em> zu erschaffen, muss man allerdings nicht
immer % und &gt; und % einzelnd eingeben sondern kann einfach
<code>crtl + shift + M</code> auf Windows oder
<code>cmd + shift + M</code> auf Mac schreiben. Shortcuts sind des
Programmierers bester Freund.</p>
<p>Schauen wir uns direkt das nächste Beispiel an. Wollen wir nun die
häufige Aufgabe ausführen, eine neue Spalte zu erstellen, können wir
dies mit <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> machen. Auch hier kann man sich den
Befehl gut mit der deutschen Übersetzung des Wortes als etwas verändern,
merken. Wie immer steht der Datensatzname ganz oben noch vor der ersten
Pipe. Wie für alle kommenden Funktionen zur Datenmanipulation muss auch
hier der Datensatzname nicht extra innerhalb von <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code>
aufgerufen werden. Das geschieht alles hinter den Kulissen. In diesem
Beispiel nehmen wir willkürlich die <code>Spieltag</code> Spalte und
addieren Zeilenweise eine 1 hinzu (würde uns in der Praxis natürlich
nichts bringen) und nennen diese neue Spalte kreativer Weise
<code>Neue_Spalte</code>. Der Name vor dem Gleichheitszeichen ist immer
der Name der neuen Spalte.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Neue_Spalte <span class="op">=</span> <span class="va">Spieltag</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 384 × 8</span></span></span>
<span><span class="co">##    Spieltag Person       Tipp  Ergebnis Tipp_Richtung Wahre_Rich…¹ Art   Neue_…²</span></span>
<span><span class="co">##       <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>         </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>        1 Thomas_Bayes 2:0   5:0      S             S            Grup…       2</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>        2 Thomas_Bayes 1:3   0:1      N             N            Grup…       3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>        2 Thomas_Bayes 0:0   0:1      U             N            Grup…       3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>        2 Thomas_Bayes 1:2   3:3      N             U            Grup…       3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>        3 Thomas_Bayes 2:1   2:1      S             S            Grup…       4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>        3 Thomas_Bayes 3:0   1:1      S             U            Grup…       4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>        3 Thomas_Bayes 0:2   0:1      N             N            Grup…       4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>        3 Thomas_Bayes 4:0   2:0      S             S            Grup…       4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>        4 Thomas_Bayes 2:1   0:1      S             N            Grup…       5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>        4 Thomas_Bayes 3:0   0:1      S             N            Grup…       5</span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 374 more rows, and abbreviated variable names ¹​Wahre_Richtung,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   ²​Neue_Spalte</span></span></span></code></pre>
<p>Möchten wir nun bestimmte Spalten auswählen, können wir das einfach
mit <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> machen. Erneut nach genau dem selben Schema.
Hier wählen wir die Spalten <code>Spieltag</code>, <code>Person</code>
und <code>Ergebnis</code> aus. Man kann an dieser Stelle auch Spalten
umbenennen, indem man den neuen Namen einfach vor den Spaltennamen
schreibt. Wir machen exemplarisch aus <code>Person</code> einfach mal
<code>Tipper</code>.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Spieltag</span>, Tipper <span class="op">=</span> <span class="va">Person</span>, <span class="va">Ergebnis</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 384 × 3</span></span></span>
<span><span class="co">##    Spieltag Tipper       Ergebnis</span></span>
<span><span class="co">##       <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>        1 Thomas_Bayes 5:0     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>        2 Thomas_Bayes 0:1     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>        2 Thomas_Bayes 0:1     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>        2 Thomas_Bayes 3:3     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>        3 Thomas_Bayes 2:1     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>        3 Thomas_Bayes 1:1     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>        3 Thomas_Bayes 0:1     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>        3 Thomas_Bayes 2:0     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>        4 Thomas_Bayes 0:1     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>        4 Thomas_Bayes 0:1     </span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 374 more rows</span></span></span></code></pre>
<p>Manchmal möchte man aber Spalten umbennen und alle Spalten im
Datensatz behalten. Wir erinnern uns, <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> wählt nur
die explizit genannten aus. Eine Lösung bietet <code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename()</a></code> mit
genau der gleichen Syntax, nur werden hier alle weiteren Spalten
behalten.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>Tipper <span class="op">=</span> <span class="va">Person</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 384 × 7</span></span></span>
<span><span class="co">##    Spieltag Tipper       Tipp  Ergebnis Tipp_Richtung Wahre_Richtung Art        </span></span>
<span><span class="co">##       <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>         </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>          </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>      </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>        1 Thomas_Bayes 2:0   5:0      S             S              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>        2 Thomas_Bayes 1:3   0:1      N             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>        2 Thomas_Bayes 0:0   0:1      U             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>        2 Thomas_Bayes 1:2   3:3      N             U              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>        3 Thomas_Bayes 2:1   2:1      S             S              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>        3 Thomas_Bayes 3:0   1:1      S             U              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>        3 Thomas_Bayes 0:2   0:1      N             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>        3 Thomas_Bayes 4:0   2:0      S             S              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>        4 Thomas_Bayes 2:1   0:1      S             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>        4 Thomas_Bayes 3:0   0:1      S             N              Gruppenpha…</span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 374 more rows</span></span></span></code></pre>
<p>So weit so gut. Aber wozu brauchen wir nun diese kryptische Pipe? Es
ist äußerst selten, dass man nur einen Befehl auf einmal anwenden
möchte. Wenn wir zum Beispiel die drei gelernten Funktionen innerhalb
eines Befehls kombinieren möchten, können wir diese einfach mit einer
Pipe verbinden. Wir erstellen also zuerst eine neue Spalte, filtern alle
Einträge von Bob heraus und schauen uns dann nur die drei Spalten
<code>Person</code>, <code>Ergebnis</code> und <code>Neue_Spalte</code>
an.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Neue_Spalte <span class="op">=</span> <span class="va">Spieltag</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Person</span> <span class="op">==</span> <span class="st">"Bob"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Person</span>, <span class="va">Ergebnis</span>, <span class="va">Neue_Spalte</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 64 × 3</span></span></span>
<span><span class="co">##    Person Ergebnis Neue_Spalte</span></span>
<span><span class="co">##    <span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>  </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>          </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span> Bob    5:0                2</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span> Bob    0:1                3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span> Bob    0:1                3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span> Bob    3:3                3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span> Bob    2:1                4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span> Bob    1:1                4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span> Bob    0:1                4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span> Bob    2:0                4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span> Bob    0:1                5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span> Bob    0:1                5</span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 54 more rows</span></span></span></code></pre>
<p>Die Reihenfolge der Funktionsaufrufe spielt dabei eine entscheidene
Rolle. Hätten wir zuerst <strong>nur</strong> die Spalten
<code>Ergebnis</code> und <code>Neue_Spalte</code> ausgewählt, hätten
wir anschließend nicht mehr nach Bob suchen können, da die Spalte
<code>Person</code> gar nicht mehr im Datensatz enthalten wäre (siehe
das <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> Beispiel oben). Außerdem wäre die
<code>Neue_Spalte</code> noch gar nicht existent.</p>
<p>Es gibt noch mehr nützliche Funktionen – alle nach dem selben
Prinzip. Möchten wir die Variablen gruppieren, um für jede der Gruppen
eine bestimmte Funktion anzuwenden, verwenden wir
<code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code>. Beispielhaft zählen wir die Anzahl der Einträge
jeder Person mit <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count()</a></code>. Um die Reihenfolge der Personen
in absteigender Reihenfolge des Alphabets anzuzeigen, können wir
innerhalb von <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange()</a></code> die <code><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc()</a></code>
(descending, engl. absteigend) Funktion verwenden.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Person</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">Person</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">## <span style="color: #949494;"># Groups:   Person [6]</span></span></span>
<span><span class="co">##   Person           n</span></span>
<span><span class="co">##   <span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span><span> Thomas_Bayes    64</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span><span> Jerzy_Neyman    64</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span><span> Egon_Pearson    64</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span><span> Charlie         64</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span><span> Bob             64</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span><span> Alice           64</span></span></span></code></pre>
<p>Hier hat jede Person gleich viele Tipps abgegeben. Zumindest befinden
sich gleich viele Zeilen für jede Person im Datensatz. Aufschluss über
die Anzahl der NAs kriegen wir erst später (siehe Kapitel
<code>Deskriptive Statistik</code>).</p>
<p>Bei ANOVAs braucht man Kategorien, nach denen man die abhängige
Variable untersuchen kann. Was wäre, wenn wir untersuchen möchten, ob
sich die erreichten Punktzahlen – also die Qualität der Tipps – zwischen
Gruppenphase und KO-Phase verändert haben? In der Spalte
<code>Art</code> gibt es allerdings die Ausprägungen
<code>Gruppenphase</code>, <code>Achtelfinale</code>,
<code>Viertelfinale</code>, <code>Halbfinale</code> und
<code>Finale</code>. Alle Finalarten fallen in die Kategorie KO-Phase.
Was wir brauchen, ist also eine neue Spalte, die immer
<strong>wenn</strong> <code>Gruppenphase</code> in der Spalte
<code>Art</code> steht, <code>Gruppe</code> beinhaltet und
<strong>ansonsten</strong> <code>KO</code>. Erreichen können wir dies
mit dem <code><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else()</a></code> (engl. für wenn_ansonsten) Befehl. Als
erstes Argument muss der Funktion die Bedingung gegeben werden, die
erfüllt werden soll. Diese muss immer einen logischen Datentyp
zurückgeben – also wahr oder falsch (<code>TRUE</code>,
<code>FALSE</code>). Das zweite Argument ist das, was passieren soll,
<strong>wenn</strong> die Bedingungen zutrifft. Das dritte Argument
kümmert sich um alle <strong>sonstigen</strong> Fälle. Also
<strong>wenn</strong> in der Spalte <code>Art</code> die
<code>Gruppenphase</code> steht, trage <code>Gruppe</code> ein,
ansonsten <code>KO</code>. Wir nennen diese neue Spalte
<code>Phase</code>.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Phase <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">Art</span> <span class="op">==</span> <span class="st">"Gruppenphase"</span>, <span class="st">"Gruppe"</span>, <span class="st">"KO"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 384 × 8</span></span></span>
<span><span class="co">##    Spieltag Person       Tipp  Ergebnis Tipp_Richtung Wahre_Richtung Art   Phase</span></span>
<span><span class="co">##       <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>         </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>          </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>        1 Thomas_Bayes 2:0   5:0      S             S              Grup… Grup…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>        2 Thomas_Bayes 1:3   0:1      N             N              Grup… Grup…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>        2 Thomas_Bayes 0:0   0:1      U             N              Grup… Grup…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>        2 Thomas_Bayes 1:2   3:3      N             U              Grup… Grup…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>        3 Thomas_Bayes 2:1   2:1      S             S              Grup… Grup…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>        3 Thomas_Bayes 3:0   1:1      S             U              Grup… Grup…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>        3 Thomas_Bayes 0:2   0:1      N             N              Grup… Grup…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>        3 Thomas_Bayes 4:0   2:0      S             S              Grup… Grup…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>        4 Thomas_Bayes 2:1   0:1      S             N              Grup… Grup…</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>        4 Thomas_Bayes 3:0   0:1      S             N              Grup… Grup…</span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 374 more rows</span></span></span></code></pre>
<p>Für Regressionsanalysen brauchen wir hingegen Dummy Variablen. Diese
können wir auf genau dieselbe Art und Weise erstellen. Wenn die
<code>Phase</code> gleich der <code>Gruppenphase</code> ist, schreibe
eine 1, ansonsten eine 0. Das gleiche Prinzip gilt für die Dummy
Variable von <code>KO</code>.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Gruppe <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">Phase</span> <span class="op">==</span> <span class="st">"Gruppe"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>         KO <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">Phase</span> <span class="op">==</span> <span class="st">"KO"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 384 × 10</span></span></span>
<span><span class="co">##    Spieltag Person       Tipp  Ergebnis Tipp_…¹ Wahre…² Art   Phase Gruppe    KO</span></span>
<span><span class="co">##       <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>  </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>        1 Thomas_Bayes 2:0   5:0      S       S       Grup… Grup…      1     0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>        2 Thomas_Bayes 1:3   0:1      N       N       Grup… Grup…      1     0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>        2 Thomas_Bayes 0:0   0:1      U       N       Grup… Grup…      1     0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>        2 Thomas_Bayes 1:2   3:3      N       U       Grup… Grup…      1     0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>        3 Thomas_Bayes 2:1   2:1      S       S       Grup… Grup…      1     0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>        3 Thomas_Bayes 3:0   1:1      S       U       Grup… Grup…      1     0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>        3 Thomas_Bayes 0:2   0:1      N       N       Grup… Grup…      1     0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>        3 Thomas_Bayes 4:0   2:0      S       S       Grup… Grup…      1     0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>        4 Thomas_Bayes 2:1   0:1      S       N       Grup… Grup…      1     0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>        4 Thomas_Bayes 3:0   0:1      S       N       Grup… Grup…      1     0</span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 374 more rows, and abbreviated variable names ¹​Tipp_Richtung,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   ²​Wahre_Richtung</span></span></span></code></pre>
<p>Eine <code>if_else</code> Verzweigung kann immer nur 2 Fälle
abgedecken. Wenn die Bedingung wahr oder eben falsch ist. Was, wenn es
mehr Fälle gibt? Angenommen, wir möchten eine Spalte mit der Punktezahl
pro Spiel erstellen. Bepunkten wollen wir es in traditioneller Manier
mit 3 Punkten für einen komplett richtigen Tipp, 1 Punkt für die
richtige Richtung (Sieg/Niederlage/Unentschieden) und keine Punkte, wenn
weder noch erraten wurde. Das sind drei Fälle. Deswegen benötigen wir
nun <code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when()</a></code>. Hier können beliebig viele Bedingungen
abgefragt werden. Dabei steht die logische Bedingung wieder an erster
Stelle. Was bei der Wahrheit der Bedingung geschehen soll, steht hinter
der Tilde <code>~</code>. Wenn der Tipp gleich dem Ergebnis ist, gibt es
drei Punkte usw. Die letzte Zeile des Befehls sieht etwas komisch aus.
Dabei funktioniert das <code>TRUE</code> wie das <code>else</code> im
<code>if_else</code> Befehl. Es deckt alle <strong>sonstigen</strong>
Fälle ab.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Punkte <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">Tipp</span> <span class="op">==</span> <span class="va">Ergebnis</span> <span class="op">~</span> <span class="fl">3</span>,</span>
<span>                            <span class="va">Tipp_Richtung</span> <span class="op">==</span> <span class="va">Wahre_Richtung</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>                            <span class="cn">TRUE</span> <span class="op">~</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 384 × 9</span></span></span>
<span><span class="co">##    Spieltag Person       Tipp  Ergebnis Tipp_Richtung Wahre…¹ Art   Phase Punkte</span></span>
<span><span class="co">##       <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>         </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>  </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>        1 Thomas_Bayes 2:0   5:0      S             S       Grup… Grup…      1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>        2 Thomas_Bayes 1:3   0:1      N             N       Grup… Grup…      1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>        2 Thomas_Bayes 0:0   0:1      U             N       Grup… Grup…      0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>        2 Thomas_Bayes 1:2   3:3      N             U       Grup… Grup…      0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>        3 Thomas_Bayes 2:1   2:1      S             S       Grup… Grup…      3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>        3 Thomas_Bayes 3:0   1:1      S             U       Grup… Grup…      0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>        3 Thomas_Bayes 0:2   0:1      N             N       Grup… Grup…      1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>        3 Thomas_Bayes 4:0   2:0      S             S       Grup… Grup…      1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>        4 Thomas_Bayes 2:1   0:1      S             N       Grup… Grup…      0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>        4 Thomas_Bayes 3:0   0:1      S             N       Grup… Grup…      0</span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 374 more rows, and abbreviated variable name ¹​Wahre_Richtung</span></span></span></code></pre>
<p>Es ist Dir sicher aufgefallen, dass wir bisher noch nie den bereits
erwähnten Zuweisungspfeil <code>&lt;-</code> verwendet haben. Das heißt,
dass unsere Rechnungen in Schall und Rauch aus Einsen und Nullen
verschwunden sind. Möchten wir die Ergebnisse der Pipe speichern, müsse
wir die Ergebnisse einer Variable zuordnen. Wenn wir lediglich Spalten
dran gehängt haben, macht es durchaus Sinn, dabei den selben
Datensatznamen zu verwenden. Ansonsten ist ein anderer, aussagekräftiger
Name zu empfehlen wie <code>tipp_wm_bayes</code> falls zum Beispiel nach
allen Tipps von Thomas Bayes gefiltert wurde.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span> <span class="op">&lt;-</span> <span class="va">tipp_wm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Punkte <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">Tipp</span> <span class="op">==</span> <span class="va">Ergebnis</span> <span class="op">~</span> <span class="fl">3</span>,</span>
<span>                            <span class="va">Tipp_Richtung</span> <span class="op">==</span> <span class="va">Wahre_Richtung</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>                            <span class="cn">TRUE</span> <span class="op">~</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Wollen wir Spalten logarithmieren oder standardisieren, können wir
dies mit <code><a href="https://rdrr.io/r/base/Log.html" class="external-link">log()</a></code> respektive <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code> machen. Zur
Illustration behalten wir nur die Spalten der Spieltage.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Spieltag_lg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">Spieltag</span><span class="op">)</span>,</span>
<span>         Spieltag_z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">Spieltag</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Spieltag</span>, <span class="va">Spieltag_lg</span>, <span class="va">Spieltag_z</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 384 × 3</span></span></span>
<span><span class="co">##    Spieltag Spieltag_lg Spieltag_z[,1]</span></span>
<span><span class="co">##       <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span>       </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span>          </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>        1       0              -</span><span style="color: #BB0000;">1.68</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>        2       0.693          -</span><span style="color: #BB0000;">1.52</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>        2       0.693          -</span><span style="color: #BB0000;">1.52</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>        2       0.693          -</span><span style="color: #BB0000;">1.52</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>        3       1.10           -</span><span style="color: #BB0000;">1.35</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>        3       1.10           -</span><span style="color: #BB0000;">1.35</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>        3       1.10           -</span><span style="color: #BB0000;">1.35</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>        3       1.10           -</span><span style="color: #BB0000;">1.35</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>        4       1.39           -</span><span style="color: #BB0000;">1.19</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>        4       1.39           -</span><span style="color: #BB0000;">1.19</span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 374 more rows</span></span></span></code></pre>
<p>Mit <code><a href="https://dplyr.tidyverse.org/reference/mutate_all.html" class="external-link">mutate_at()</a></code> erhält man die Möglichkeit eine Funktion
wie <code><a href="https://rdrr.io/r/base/Log.html" class="external-link">log()</a></code> gleich auf mehrere Spalten anzuwenden. Dabei
müssen die Spalten im <code><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code> Argument verpackt werden.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html" class="external-link">mutate_at</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">Spieltag</span>, <span class="va">Punkte</span><span class="op">)</span>, <span class="va">log</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 384 × 9</span></span></span>
<span><span class="co">##    Spieltag Person       Tipp  Ergebnis Tipp_Richt…¹ Wahre…² Art   Phase  Punkte</span></span>
<span><span class="co">##       <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>    0     Thomas_Bayes 2:0   5:0      S            S       Grup… Grup…    0   </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>    0.693 Thomas_Bayes 1:3   0:1      N            N       Grup… Grup…    0   </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>    0.693 Thomas_Bayes 0:0   0:1      U            N       Grup… Grup… -</span><span style="color: #BB0000;">Inf</span><span>   </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>    0.693 Thomas_Bayes 1:2   3:3      N            U       Grup… Grup… -</span><span style="color: #BB0000;">Inf</span><span>   </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>    1.10  Thomas_Bayes 2:1   2:1      S            S       Grup… Grup…    1.10</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>    1.10  Thomas_Bayes 3:0   1:1      S            U       Grup… Grup… -</span><span style="color: #BB0000;">Inf</span><span>   </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>    1.10  Thomas_Bayes 0:2   0:1      N            N       Grup… Grup…    0   </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>    1.10  Thomas_Bayes 4:0   2:0      S            S       Grup… Grup…    0   </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>    1.39  Thomas_Bayes 2:1   0:1      S            N       Grup… Grup… -</span><span style="color: #BB0000;">Inf</span><span>   </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>    1.39  Thomas_Bayes 3:0   0:1      S            N       Grup… Grup… -</span><span style="color: #BB0000;">Inf</span><span>   </span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 374 more rows, and abbreviated variable names ¹​Tipp_Richtung,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   ²​Wahre_Richtung</span></span></span></code></pre>
<p>Ein paar wichtige Konzepte fehlen uns noch. Dafür schauen wir uns
einen neuen Datensatz namens <code>big_five</code> an. Der Datensatz
beinhaltet soziodemographische Daten wie <code>Alter</code>,
<code>Geschlecht</code> und <code>Herkunft</code> sowie Spalten für die
durchschnittliche Ausprägung von <code>Extraversion</code>,
<code>Neurotizismus</code>, <code>Verträglichkeit</code> und
<code>Gewissenhaftigkeit</code>. Für den fünften Persönlichkeitsfaktor
<code>Offenheit</code> wurde noch kein durchschnittlicher Wert
berechnet. Es gibt 10 Items <code>O1</code> bis <code>O10</code>, die
die Dimension der Offenheit abgefragt haben.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">big_five</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 200 × 17</span></span></span>
<span><span class="co">##    Alter Gesch…¹ Herku…² Extra…³ Neuro…⁴ Vertr…⁵ Gewis…⁶    O1    O2    O3    O4</span></span>
<span><span class="co">##    <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>     </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>    36 m       DE          3       1.9     3.4     3.3     5     1     5     1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>    30 f       US          3.1     3.4     3.1     2.7     5     3     5     3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>    23 m       US          3.4     2.4     3.6     3       3     3     5     3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>    54 m       US          3.3     4.2     3.6     3       2     5     3     4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>    24 f       US          3       2.8     3       3.3     5     1     5     1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>    14 f       US          2.8     3.5     3.2     3.3     5     1     5     2</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>    32 m       HK          3.5     3.1     4.2     3       3     1     5     1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>    20 m       IN          3.5     2.6     3.5     2.7     2     1     3     1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>    29 f       IN          3       3.7     3.2     2.9     4     1     5     1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>    17 m       US          3.1     3.6     3       2.9     4     3     4     5</span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 190 more rows, 6 more variables: O5 &lt;dbl&gt;, O6 &lt;dbl&gt;, O7 &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   O8 &lt;dbl&gt;, O9 &lt;dbl&gt;, O10 &lt;dbl&gt;, and abbreviated variable names ¹​Geschlecht,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   ²​Herkunft, ³​Extraversion, ⁴​Neurotizismus, ⁵​Vertraeglichkeit,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   ⁶​Gewissenhaftigkeit</span></span></span></code></pre>
<p>Somit stoßen wir auch schon auf eine sehr häufige Problemstellung.
Das Berechnen von Mittelwerten oder Summen über mehrer Spalten pro
Person (also zeilenweise). Dafür wählen wir uns zuerst die
interessierenden Spalten wie gewohnt mit <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> aus. Wenn
die Spalten nebeneinander liegen, kann man auch einfach einen
Doppelpunkt benutzen.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vars</span> <span class="op">&lt;-</span> <span class="va">big_five</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">O1</span><span class="op">:</span><span class="va">O10</span><span class="op">)</span></span></code></pre></div>
<p>Der Doppelpunkt liest sich hier zum Beispiel als O1 bis O10. Erst
einmal ausgewählt, ist der Rest schnell erledigt. Wir erstellen mit
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> eine neue Spalte namens <code>Offenheit</code> und
erhalten mit <code><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans()</a></code> die Mittelwerte pro Zeile (row),
also pro Person. Es gibt eine äquivalente Funktion
<code><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums()</a></code> zum Summieren. Anschließend möchten wir die
einzelnen Items nicht im Datensatz, sondern nur die soziodemographischen
Daten und die fünf Dimensionen der Persönlichkeitsfaktoren behalten.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">big_five</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Offenheit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">vars</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Alter</span><span class="op">:</span><span class="va">Gewissenhaftigkeit</span>, <span class="va">Offenheit</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 200 × 8</span></span></span>
<span><span class="co">##    Alter Geschlecht Herkunft Extraversion Neurotizismus Vertra…¹ Gewis…² Offen…³</span></span>
<span><span class="co">##    <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>      </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>           </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span>         </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span>    </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>    36 m          DE                3             1.9      3.4     3.3     3.6</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>    30 f          US                3.1           3.4      3.1     2.7     3.8</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>    23 m          US                3.4           2.4      3.6     3       3.2</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>    54 m          US                3.3           4.2      3.6     3       2.9</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>    24 f          US                3             2.8      3       3.3     3.5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>    14 f          US                2.8           3.5      3.2     3.3     3.6</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>    32 m          HK                3.5           3.1      4.2     3       2.7</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>    20 m          IN                3.5           2.6      3.5     2.7     2.7</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>    29 f          IN                3             3.7      3.2     2.9     3.6</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>    17 m          US                3.1           3.6      3       2.9     3.5</span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 190 more rows, and abbreviated variable names ¹​Vertraeglichkeit,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   ²​Gewissenhaftigkeit, ³​Offenheit</span></span></span></code></pre>
<p>Die Reihenfolge der in <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> ausgewählten Spalten
entscheidet übrigens über die Reihenfolge der Spalten. Alternativ zum
Auswählen der Spalten, die man behalten möchte, kann man auch einfach
die ungewünschten Spalten <code>O1</code> bis <code>O10</code>
entfernen.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">big_five</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Offenheit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowMeans</a></span><span class="op">(</span><span class="va">vars</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="op">(</span><span class="va">O1</span><span class="op">:</span><span class="va">O10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Beachte die Klammern um <code>O1:O10</code>. Was ist eigentlich, wenn
man nur Spalten mit Zahlen im Datensatz behalten möchte? Mit
<code><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">select_if()</a></code> ist eine speziell auf solche Aufgaben
zugeschnittene Funktion verfügbar. <strong>Wenn</strong> die Spalte
numerisch ist (<code>is.numeric</code>), wird sie behalten.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">big_five</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">select_if</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 200 × 15</span></span></span>
<span><span class="co">##    Alter Extravers…¹ Neuro…² Vertr…³ Gewis…⁴    O1    O2    O3    O4    O5    O6</span></span>
<span><span class="co">##    <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span>       </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>    36         3       1.9     3.4     3.3     5     1     5     1     4     1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>    30         3.1     3.4     3.1     2.7     5     3     5     3     4     1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>    23         3.4     2.4     3.6     3       3     3     5     3     4     1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>    54         3.3     4.2     3.6     3       2     5     3     4     3     3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>    24         3       2.8     3       3.3     5     1     5     1     5     1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>    14         2.8     3.5     3.2     3.3     5     1     5     2     2     1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>    32         3.5     3.1     4.2     3       3     1     5     1     5     1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>    20         3.5     2.6     3.5     2.7     2     1     3     1     4     1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>    29         3       3.7     3.2     2.9     4     1     5     1     5     1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>    17         3.1     3.6     3       2.9     4     3     4     5     4     2</span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 190 more rows, 4 more variables: O7 &lt;dbl&gt;, O8 &lt;dbl&gt;, O9 &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   O10 &lt;dbl&gt;, and abbreviated variable names ¹​Extraversion, ²​Neurotizismus,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   ³​Vertraeglichkeit, ⁴​Gewissenhaftigkeit</span></span></span></code></pre>
<p>Ein weiterer praktischer Sonderfall ist <code><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">select_at()</a></code>. Die
Funktionsweise ist die selbe wie bei <code><a href="https://dplyr.tidyverse.org/reference/mutate_all.html" class="external-link">mutate_at()</a></code>. Der
Vorteil ist die Integration von <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code> und
<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with()</a></code> womit man, wie der Name bereits suggeriert,
Anfangs- respektive Endbuchstaben oder ganze Wörter auswählen kann. Es
werden also nur die Spalten behalten, die mit der Zeichenkombination
starten oder enden. Hier erhalten wir alle Spalten mit dem
Anfangsbuchstaben <code>E</code>. Also hier nur Extraversion.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">big_five</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">select_at</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"E"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 200 × 1</span></span></span>
<span><span class="co">##    Extraversion</span></span>
<span><span class="co">##           <span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span>          3  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span>          3.1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span>          3.4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span>          3.3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span>          3  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span>          2.8</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span>          3.5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span>          3.5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span>          3  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span>          3.1</span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 190 more rows</span></span></span></code></pre>
<div class="section level3">
<h3 id="breites-vs--langes-datenformat">Breites vs. langes Datenformat<a class="anchor" aria-label="anchor" href="#breites-vs--langes-datenformat"></a>
</h3>
<p>Das lange Datenformat ist eins der wichtigsten Konzepte. Man benötigt
es für jeden Graphen und für manche induktiven Verfahren. Man erhält im
Großteil der Fälle beim Erheben Daten im breiten Format. Um das besser
zu veranschaulichen schauen wir uns einmal an, wie unsere Tipps zur WM
in breitem Format aussehen würden.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm_wide</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 64 × 7</span></span></span>
<span><span class="co">##    Thomas_Bayes Egon_Pearson Jerzy_Neyman Alice Bob   Charlie Ergebnis</span></span>
<span><span class="co">##    <span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span> 2:0          1:0          2:1          2:1   3:1   2:1     5:0     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span> 1:3          0:0          0:2          1:2   0:2   0:2     0:1     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span> 0:0          0:2          1:1          1:1   2:1   1:1     0:1     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span> 1:2          1:1          2:1          2:4   2:2   1:0     3:3     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span> 2:1          </span><span style="color: #BB0000;">NA</span><span>           2:0          2:1   2:0   2:1     2:1     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span> 3:0          </span><span style="color: #BB0000;">NA</span><span>           3:1          2:1   2:1   4:0     1:1     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span> 0:2          1:2          0:2          1:2   2:1   1:2     0:1     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span> 4:0          1:2          3:0          1:0   3:0   4:0     2:0     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span> 2:1          0:0          1:1          1:1   0:1   1:0     0:1     </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span> 3:0          1:0          2:0          3:1   3:1   2:0     0:1     </span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 54 more rows</span></span></span></code></pre>
<p>In jeder Spalte sind hier die Tipps der jeweiligen Person. Was
bedeutet es nun, diesen Datensatz lang zu machen?</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm_wide</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">gather</a></span><span class="op">(</span><span class="va">Person</span>, <span class="va">Tipp</span>, <span class="va">Thomas_Bayes</span><span class="op">:</span><span class="va">Charlie</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 384 × 3</span></span></span>
<span><span class="co">##    Ergebnis Person       Tipp </span></span>
<span><span class="co">##    <span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span> 5:0      Thomas_Bayes 2:0  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span> 0:1      Thomas_Bayes 1:3  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span> 0:1      Thomas_Bayes 0:0  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span> 3:3      Thomas_Bayes 1:2  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span> 2:1      Thomas_Bayes 2:1  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span> 1:1      Thomas_Bayes 3:0  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span> 0:1      Thomas_Bayes 0:2  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span> 2:0      Thomas_Bayes 4:0  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span> 0:1      Thomas_Bayes 2:1  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span> 0:1      Thomas_Bayes 3:0  </span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 374 more rows</span></span></span></code></pre>
<p>Wie man sieht, werden nun alle Ergebnisse, Personen und Tipps jeweils
in eine Spalte geschrieben. Wir erreichen dies mit
<code><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">gather()</a></code>. Das erste Arugment ist der Name der neuen
Spalten, die die Werte der Spaltennamen enthält. Also hier die Personen.
Das zweite Argument beschreibt die Werte innerhalb der Spalten, die wir
hier als <code>Tipp</code> bezeichnen. Das dritte Argument sind nun die
Spalten, die zusammen gesammelt werden sollen. Wir wollen alle Personen
– also von Thomas Bayes bis Charlie – in der Spalte <code>Person</code>
haben. Weshalb wir das brauchen, wird in den folgenden Kapiteln noch
klarer. Das Prinzip hinter <code><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">gather()</a></code> ist etwas abstrakt und
verlangt am Anfang erst einmal Gewöhnung. Wenn man sich nicht sicher
ist, welcher Name nun wozu gehört kann man gut und gerne auch erst
einmal sowas wie</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tipp_wm_wide</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">gather</a></span><span class="op">(</span><span class="va">test</span>, <span class="va">test1</span>, <span class="va">Thomas_Bayes</span><span class="op">:</span><span class="va">Charlie</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 384 × 3</span></span></span>
<span><span class="co">##    Ergebnis test         test1</span></span>
<span><span class="co">##    <span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>        </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span><span> 5:0      Thomas_Bayes 2:0  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span><span> 0:1      Thomas_Bayes 1:3  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span><span> 0:1      Thomas_Bayes 0:0  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span><span> 3:3      Thomas_Bayes 1:2  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span><span> 2:1      Thomas_Bayes 2:1  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span><span> 1:1      Thomas_Bayes 3:0  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span><span> 0:1      Thomas_Bayes 0:2  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span><span> 2:0      Thomas_Bayes 4:0  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span><span> 0:1      Thomas_Bayes 2:1  </span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span><span> 0:1      Thomas_Bayes 3:0  </span></span></span>
<span><span class="co">## <span style="color: #949494;"># … with 374 more rows</span></span></span></code></pre>
<p>schreiben und <code>test</code> und <code>test1</code> anschließend
in passende Spaltennamen ändern. Das Gegenstück zu <code><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">gather()</a></code>
ist <code><a href="https://tidyr.tidyverse.org/reference/spread.html" class="external-link">spread()</a></code>, allerdings ist die Funktion kein perfekter
Gegenspieler. Häufiger treten Fehler auf. Gut für uns, dass es praktisch
nicht vorkommt, lange Formate breit machen zu wollen.</p>
<p>Den größten Teil hast du nun bereits hinter Dir. Bevor Du dich jedoch
euphorisch auf die Übungsaufgaben stürzst, noch ein paare Worte zu
Fehler- und Warnmeldungen.</p>
</div>
</div>
<div class="section level2">
<h2 id="fehler--und-warnmeldungen">Fehler- und Warnmeldungen<a class="anchor" aria-label="anchor" href="#fehler--und-warnmeldungen"></a>
</h2>
<p>Es gibt einen großen Unterschied zwischen Fehler- und Warnmeldungen.
Wie der Name bereits suggeriert, stoppen Fehlermeldungen den Code,
während Warnmeldungen ein Ergebnis zurückgeben und nur auf eine
Ungereimtheit hinweisen. Es ist also sehr wichtig, die roten Meldungen
in der Konsole genau zu lesen. Wichtig ist, beim roten Text nicht gleich
in Panik zu geraten, sondern entspannt die Meldung durchzulesen und
falls man nicht weiter weiß, die Meldung zu googeln.</p>
</div>
<div class="section level2">
<h2 id="übungen">Übungen<a class="anchor" aria-label="anchor" href="#%C3%BCbungen"></a>
</h2>
<p>Nun geht’s an die Übung. Kopiere den R Befehl in Deine Konsole und es
startet sich ein interaktives Tutorial in Deinem Standardbrowser.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">learnr</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/learnr/reference/run_tutorial.html" class="external-link">run_tutorial</a></span><span class="op">(</span><span class="st">"wiederholung"</span>, package <span class="op">=</span> <span class="st">"rBasics"</span><span class="op">)</span></span></code></pre></div>
<p>Der interaktive Übungssatz beinhaltet verschiedene Übungen, die das
Verständnis des Gelernten prüfen sollen. Dabei kann man sich Hinweise
holen, wenn man nicht weiterkommt. Bei Multiple Choice Fragen wird
sofort geprüft, ob die Antwort korrekt ist. Um zu erfahren, ob der
geschrieben Code richtig ist, kann man mehrmals auf <code>Hints</code>
drücken, da der letzte Hinweis immer die Lösung beinhaltet. Der
Fortschritt wird automatisch auf Deinem Computer gespeichert, sodass Du
zu einem späteren Zeitpunkt die Übungen fortführen kannst. Viel Erfolg
und vor allem viel Spaß!</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jan Philipp Nolte.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
